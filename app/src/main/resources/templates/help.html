<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::main})}">
<head>
    <title>Ayuda - Regata Online</title>
</head>
<body>
    <main>
        <div class="container mt-4">
            <!-- Encabezado -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card bg-info text-white">
                        <div class="card-body text-center py-5">
                            <h1 class="display-4">
                                <i class="fas fa-question-circle me-3"></i>
                                Centro de Ayuda
                            </h1>
                            <p class="lead">Guía completa para usar el sistema Regata Online</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Búsqueda de ayuda -->
            <div class="row mb-4">
                <div class="col-lg-8 mx-auto">
                    <div class="card">
                        <div class="card-body">
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-search"></i>
                                </span>
                                <input type="text" class="form-control" placeholder="Buscar en la ayuda..." id="searchHelp">
                                <button class="btn btn-outline-secondary" type="button">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secciones de ayuda -->
            <div class="row">
                <!-- Navegación lateral -->
                <div class="col-lg-3 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="fas fa-list me-2"></i>
                                Secciones
                            </h6>
                        </div>
                        <div class="list-group list-group-flush">
                            <a href="#getting-started" class="list-group-item list-group-item-action">
                                <i class="fas fa-play me-2"></i>Primeros Pasos
                            </a>
                            <a href="#modelos" class="list-group-item list-group-item-action">
                                <i class="fas fa-cogs me-2"></i>Gestión de Modelos
                            </a>
                            <a href="#jugadores" class="list-group-item list-group-item-action">
                                <i class="fas fa-users me-2"></i>Gestión de Jugadores
                            </a>
                            <a href="#barcos" class="list-group-item list-group-item-action">
                                <i class="fas fa-anchor me-2"></i>Gestión de Barcos
                            </a>
                            <a href="#partidas" class="list-group-item list-group-item-action">
                                <i class="fas fa-trophy me-2"></i>Gestión de Partidas
                            </a>
                            <a href="#troubleshooting" class="list-group-item list-group-item-action">
                                <i class="fas fa-wrench me-2"></i>Solución de Problemas
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Contenido principal -->
                <div class="col-lg-9">
                    <!-- Primeros pasos -->
                    <div id="getting-started" class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-play me-2"></i>
                                Primeros Pasos
                            </h5>
                        </div>
                        <div class="card-body">
                            <h6>Bienvenido a Regata Online</h6>
                            <p>Este sistema te permite gestionar todos los aspectos de las competencias náuticas. Para comenzar:</p>
                            <ol>
                                <li><strong>Crear Modelos:</strong> Define los tipos de barcos disponibles</li>
                                <li><strong>Registrar Jugadores:</strong> Añade participantes al sistema</li>
                                <li><strong>Configurar Barcos:</strong> Asigna barcos a los jugadores</li>
                                <li><strong>Organizar Partidas:</strong> Crea y gestiona competencias</li>
                            </ol>
                            <div class="alert alert-info">
                                <i class="fas fa-lightbulb me-2"></i>
                                <strong>Consejo:</strong> Comienza creando al menos un modelo de barco antes de registrar jugadores o barcos.
                            </div>
                        </div>
                    </div>

                    <!-- Gestión de Modelos -->
                    <div id="modelos" class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-cogs me-2"></i>
                                Gestión de Modelos
                            </h5>
                        </div>
                        <div class="card-body">
                            <h6>¿Qué son los Modelos?</h6>
                            <p>Los modelos definen las características técnicas de los tipos de barcos disponibles en el sistema.</p>
                            
                            <h6>Crear un Nuevo Modelo</h6>
                            <ol>
                                <li>Ve a la sección "Modelos" en el menú principal</li>
                                <li>Haz clic en "Nuevo Modelo"</li>
                                <li>Completa los campos requeridos:
                                    <ul>
                                        <li><strong>Nombre:</strong> Identificación del modelo</li>
                                        <li><strong>Eslora:</strong> Longitud del barco en metros</li>
                                        <li><strong>Manga:</strong> Ancho del barco en metros</li>
                                        <li><strong>Velocidad Máxima:</strong> En nudos</li>
                                        <li><strong>Descripción:</strong> Información adicional</li>
                                    </ul>
                                </li>
                                <li>Haz clic en "Guardar"</li>
                            </ol>
                            
                            <div class="alert alert-warning">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>Importante:</strong> No puedes eliminar un modelo que tenga barcos asociados.
                            </div>
                        </div>
                    </div>

                    <!-- Gestión de Jugadores -->
                    <div id="jugadores" class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-users me-2"></i>
                                Gestión de Jugadores
                            </h5>
                        </div>
                        <div class="card-body">
                            <h6>Registrar un Nuevo Jugador</h6>
                            <ol>
                                <li>Accede a "Jugadores" desde el menú</li>
                                <li>Selecciona "Nuevo Jugador"</li>
                                <li>Completa la información:
                                    <ul>
                                        <li><strong>Nombre Completo:</strong> Nombre y apellidos</li>
                                        <li><strong>Email:</strong> Dirección de correo única</li>
                                        <li><strong>Contraseña:</strong> Para nuevos jugadores</li>
                                        <li><strong>Rol:</strong> ADMIN o JUGADOR</li>
                                        <li><strong>Estado:</strong> Activo/Inactivo</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <h6>Gestionar Jugadores Existentes</h6>
                            <ul>
                                <li><strong>Ver Detalles:</strong> Haz clic en el ícono de ojo</li>
                                <li><strong>Editar:</strong> Usa el ícono de lápiz</li>
                                <li><strong>Desactivar:</strong> Cambia el estado en lugar de eliminar</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Gestión de Barcos -->
                    <div id="barcos" class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-anchor me-2"></i>
                                Gestión de Barcos
                            </h5>
                        </div>
                        <div class="card-body">
                            <h6>Crear un Nuevo Barco</h6>
                            <ol>
                                <li>Ve a "Barcos" en el menú principal</li>
                                <li>Haz clic en "Nuevo Barco"</li>
                                <li>Configura los parámetros:
                                    <ul>
                                        <li><strong>Nombre:</strong> Identificación del barco</li>
                                        <li><strong>Propietario:</strong> Selecciona un jugador</li>
                                        <li><strong>Modelo:</strong> Elige el tipo de barco</li>
                                        <li><strong>Posición:</strong> Coordenadas X, Y</li>
                                        <li><strong>Velocidad:</strong> Velocidad actual</li>
                                        <li><strong>Dirección:</strong> Rumbo en grados</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <h6>Filtros Disponibles</h6>
                            <ul>
                                <li><strong>Por Jugador:</strong> Ver barcos de un propietario específico</li>
                                <li><strong>Por Modelo:</strong> Filtrar por tipo de barco</li>
                                <li><strong>Por Estado:</strong> Activos o inactivos</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Gestión de Partidas -->
                    <div id="partidas" class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-trophy me-2"></i>
                                Gestión de Partidas
                            </h5>
                        </div>
                        <div class="card-body">
                            <h6>Crear una Nueva Partida</h6>
                            <ol>
                                <li>Accede a "Partidas" desde el menú</li>
                                <li>Selecciona "Nueva Partida"</li>
                                <li>Define los parámetros:
                                    <ul>
                                        <li><strong>Nombre:</strong> Título de la competencia</li>
                                        <li><strong>Descripción:</strong> Detalles de la partida</li>
                                        <li><strong>Mapa:</strong> Selecciona el escenario</li>
                                        <li><strong>Fechas:</strong> Inicio y fin programados</li>
                                        <li><strong>Duración Máxima:</strong> En minutos</li>
                                        <li><strong>Participantes:</strong> Número máximo</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <h6>Estados de Partida</h6>
                            <ul>
                                <li><strong>Pendiente:</strong> Creada pero no iniciada</li>
                                <li><strong>En Curso:</strong> Competencia activa</li>
                                <li><strong>Finalizada:</strong> Completada exitosamente</li>
                                <li><strong>Cancelada:</strong> Terminada prematuramente</li>
                            </ul>
                            
                            <h6>Gestionar Participantes</h6>
                            <p>Desde la vista de detalles de una partida puedes:</p>
                            <ul>
                                <li>Ver la lista de barcos participantes</li>
                                <li>Monitorear posiciones en el mapa</li>
                                <li>Controlar el estado de la competencia</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Solución de Problemas -->
                    <div id="troubleshooting" class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-wrench me-2"></i>
                                Solución de Problemas
                            </h5>
                        </div>
                        <div class="card-body">
                            <h6>Problemas Comunes</h6>
                            
                            <div class="accordion" id="troubleshootingAccordion">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem1">
                                            No puedo eliminar un modelo
                                        </button>
                                    </h2>
                                    <div id="problem1" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                        <div class="accordion-body">
                                            <strong>Causa:</strong> El modelo tiene barcos asociados.<br>
                                            <strong>Solución:</strong> Primero elimina o reasigna todos los barcos que usan ese modelo.
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem2">
                                            Error al crear un barco
                                        </button>
                                    </h2>
                                    <div id="problem2" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                        <div class="accordion-body">
                                            <strong>Verificar:</strong>
                                            <ul>
                                                <li>Que existe al menos un modelo de barco</li>
                                                <li>Que el jugador seleccionado esté activo</li>
                                                <li>Que las coordenadas sean válidas</li>
                                                <li>Que la velocidad no exceda la máxima del modelo</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#problem3">
                                            La partida no se puede iniciar
                                        </button>
                                    </h2>
                                    <div id="problem3" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                                        <div class="accordion-body">
                                            <strong>Requisitos:</strong>
                                            <ul>
                                                <li>La partida debe estar en estado "Pendiente"</li>
                                                <li>Debe tener al menos un participante</li>
                                                <li>Las fechas deben ser válidas</li>
                                                <li>Debe tener un mapa asignado</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Consejo:</strong> Si persisten los problemas, verifica que todos los datos requeridos estén completos y sean válidos.
                            </div>
                        </div>
                    </div>

                    <!-- Atajos de teclado -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-keyboard me-2"></i>
                                Atajos de Teclado
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Navegación General</h6>
                                    <ul class="list-unstyled">
                                        <li><kbd>Alt</kbd> + <kbd>H</kbd> - Ir al inicio</li>
                                        <li><kbd>Alt</kbd> + <kbd>M</kbd> - Ir a modelos</li>
                                        <li><kbd>Alt</kbd> + <kbd>J</kbd> - Ir a jugadores</li>
                                        <li><kbd>Alt</kbd> + <kbd>B</kbd> - Ir a barcos</li>
                                        <li><kbd>Alt</kbd> + <kbd>P</kbd> - Ir a partidas</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Acciones Rápidas</h6>
                                    <ul class="list-unstyled">
                                        <li><kbd>Ctrl</kbd> + <kbd>N</kbd> - Nuevo elemento</li>
                                        <li><kbd>Ctrl</kbd> + <kbd>S</kbd> - Guardar</li>
                                        <li><kbd>Esc</kbd> - Cancelar/Cerrar</li>
                                        <li><kbd>Enter</kbd> - Confirmar acción</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contacto de soporte -->
            <div class="row">
                <div class="col-12">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h5 class="card-title">
                                <i class="fas fa-life-ring me-2"></i>
                                ¿Necesitas más ayuda?
                            </h5>
                            <p class="card-text">Si no encuentras la respuesta a tu pregunta, no dudes en contactar al equipo de soporte.</p>
                            <div class="d-flex justify-content-center gap-3">
                                <a th:href="@{/about}" class="btn btn-outline-primary">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Acerca del Sistema
                                </a>
                                <a th:href="@{/}" class="btn btn-primary">
                                    <i class="fas fa-home me-2"></i>
                                    Volver al Inicio
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts específicos para la página de ayuda -->
    <th:block th:fragment="scripts">
        <script>
            // Funcionalidad de búsqueda en la ayuda
            document.getElementById('searchHelp').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const sections = document.querySelectorAll('.card');
                
                sections.forEach(section => {
                    const text = section.textContent.toLowerCase();
                    if (text.includes(searchTerm) || searchTerm === '') {
                        section.style.display = 'block';
                    } else {
                        section.style.display = 'none';
                    }
                });
            });
            
            // Smooth scrolling para los enlaces de navegación
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        </script>
    </th:block>
</body>
</html>